<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>事件循环 | 记录前端学习的简易博客</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/blog/fire.png">
    <meta name="description" content="何为进程？
程序运行需要有它专属的内存空间，可以理解为进程
每个应用至少有一个进程，进程之间相互独立，即使要通信，也需要双方同意。
何为线程？
有了进程后，就可以运行程序的代码
运行代码的【人】称之为线程
一个进程至少有一个线程，所以在进程开启后会自动创建一个线程来运行代码，该线程称之为主线程。
如果程序需要同时执行多块代码，主线程 ...">
    
    <link rel="preload" href="/blog/assets/css/0.styles.53c9dc91.css" as="style"><link rel="preload" href="/blog/assets/js/app.ef606c2b.js" as="script"><link rel="preload" href="/blog/assets/js/6.ef046bf0.js" as="script"><link rel="preload" href="/blog/assets/js/3.0deb6e1a.js" as="script"><link rel="preload" href="/blog/assets/js/16.f2cfb457.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.5af07e9e.js"><link rel="prefetch" href="/blog/assets/js/11.9cc54484.js"><link rel="prefetch" href="/blog/assets/js/12.20ff25fe.js"><link rel="prefetch" href="/blog/assets/js/13.c940e617.js"><link rel="prefetch" href="/blog/assets/js/14.c8649e1c.js"><link rel="prefetch" href="/blog/assets/js/15.b085bdb9.js"><link rel="prefetch" href="/blog/assets/js/17.16272ad3.js"><link rel="prefetch" href="/blog/assets/js/18.fe228f50.js"><link rel="prefetch" href="/blog/assets/js/19.0339c5f2.js"><link rel="prefetch" href="/blog/assets/js/4.e6797422.js"><link rel="prefetch" href="/blog/assets/js/5.4ce720b1.js"><link rel="prefetch" href="/blog/assets/js/7.a7f1498d.js"><link rel="prefetch" href="/blog/assets/js/8.b4d7524e.js"><link rel="prefetch" href="/blog/assets/js/9.402f2816.js"><link rel="prefetch" href="/blog/assets/js/vuejs-paginate.e46ccda7.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.53c9dc91.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/blog/" class="nav-link home-link">记录前端学习的简易博客 </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/blog/" class="nav-link">文章</a></li><li class="nav-item"><a href="/blog/tag/" class="nav-link">标签</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/blog/" class="nav-link mobile-home-link">记录前端学习的简易博客 </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/blog/" class="nav-link">文章</a></li><li class="mobile-nav-item"><a href="/blog/tag/" class="nav-link">标签</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        事件循环
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">JiuHous</span> <span itemprop="address">   in Suzhou</span></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2023-05-22T00:00:00.000Z">
      2023-05-22
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/blog/tag/浏览器" data-v-42ccfcd5><span data-v-42ccfcd5>浏览器</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/blog/tag/JavaScript" data-v-42ccfcd5><span data-v-42ccfcd5>JavaScript</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/blog/tag/进程" data-v-42ccfcd5><span data-v-42ccfcd5>进程</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/blog/tag/线程" data-v-42ccfcd5><span data-v-42ccfcd5>线程</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/blog/tag/异步" data-v-42ccfcd5><span data-v-42ccfcd5>异步</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h2 id="浏览器的进程模型"><a href="#浏览器的进程模型" class="header-anchor">#</a> 浏览器的进程模型</h2> <h3 id="何为进程"><a href="#何为进程" class="header-anchor">#</a> 何为进程？</h3> <p>程序运行需要有它专属的内存空间，可以理解为进程</p> <p>每个应用至少有一个进程，进程之间相互独立，即使要通信，也需要双方同意。</p> <h3 id="何为线程"><a href="#何为线程" class="header-anchor">#</a> 何为线程？</h3> <p>有了进程后，就可以运行程序的代码</p> <p>运行代码的【人】称之为线程</p> <p>一个进程至少有一个线程，所以在进程开启后会自动创建一个线程来运行代码，该线程称之为主线程。</p> <p>如果程序需要同时执行多块代码，主线程就会启动更多的线程来执行代码，所以一个进程中可以包含多个线程。</p> <h3 id="浏览器有哪些进程和线程"><a href="#浏览器有哪些进程和线程" class="header-anchor">#</a> 浏览器有哪些进程和线程？</h3> <p><strong>浏览器是一个多进程多线程的应用程序</strong></p> <p>浏览器内部工作极其复杂，为了避免相互影响，为了减少连环崩溃的几率，当启动浏览器后，它会自动启动多个进程。其中，最主要的进程有：</p> <ol><li><p>浏览器进程</p> <p>主要负责界面显示、用户交互三子进程管理等。浏览器进程内部会启动多个线程处理不同的任务。</p></li> <li><p>网络进程</p> <p>负责加载网络资源。网络进程内部会启动多个线程来处理不同的网络任务。</p></li> <li><p>渲染进程</p> <p>渲染进程启动后，会开启一个渲染主线程，主线程负责执行HTML、CSS、JS 代码。</p> <p>默认情况下，浏览器会为每个标签页开启一个新的渲染进程，以保证不同的标签页之间不相互影响。</p></li></ol> <h2 id="渲染主线程是如何工作的"><a href="#渲染主线程是如何工作的" class="header-anchor">#</a> 渲染主线程是如何工作的？</h2> <p>渲染主线程是浏览器中最繁忙的线程，需要它处理的任务包括但不限于：</p> <ul><li><p>解析 HTML</p></li> <li><p>解析 CSS</p></li> <li><p>计算样式</p></li> <li><p>布局</p></li> <li><p>处理图层</p></li> <li><p>每秒把页面画60次</p></li> <li><p>执行全局JS代码</p></li> <li><p>执行事件处理函数</p></li> <li><p>执行计算器的回调函数</p></li> <li><p>......</p></li></ul> <p>要处理这么多的任务，主线程遇到一个前所未有的难题：如何调度任务？</p> <p>比如：</p> <ul><li>我正在执行一个JS函数。执行到一半的时候用户点击了按钮，我该立即去执行点击事件的处理函数吗?</li> <li>我正在执行一个JS 函数，执行到一半的时候某个计时器到达了时间，我该立即去执行它的回调吗?</li> <li>浏览器进程通知我&quot;用户点击了按钮&quot;，与此同时，某个计时器也到达了时间，我应该处理哪一个呢?</li></ul> <p>解决办法：<strong>排队</strong></p> <ol><li>在最开始的时候，渲染主线程会进入一个无限循环。</li> <li>每一次循环会检查消息队列中是否有任务存在。如果有，就取出第一个任务执行，执行完一个后进入下一次循环;如果没有,则进入休眠状态。</li> <li>其他所有线程〈包括其他进程的线程）可以随时向消息队列添加任务。新任务会加到消息队列的末尾。在添加新任务时，如果主线程是休眠状态，则会将其唤醒以继续循环拿取任务。</li></ol> <p>这样即可让每个任务有条不紊的，持续的进行下去了。</p> <p><strong>整个过程，被称之为事件循环（学习循环）</strong></p> <h2 id="若干解释"><a href="#若干解释" class="header-anchor">#</a> 若干解释</h2> <h3 id="何为异步"><a href="#何为异步" class="header-anchor">#</a> 何为异步？</h3> <p>代码在执行过程中，会遇到一些无法立即处理的任务，比如：</p> <ul><li>计时完成后需要执行的任务 -- <strong>SetTimeout</strong>，<strong>SetInterval</strong></li> <li>网络通信完成后需要执行的任务 -- <strong>XHR</strong>，<strong>Fetch</strong></li> <li>用户操作后需要执行的任务 -- <strong>addEventListener</strong></li></ul> <p>如果让渲染主线程等待这些任务的时机达到，就会导致主线程长期处于<strong>阻塞</strong>的状态，从而导致浏览器卡死。</p> <p><img src="/blog/static/eventlook_img_01.png" alt="同步流程"></p> <p><strong>使用异步的方式，渲染主线程永不阻塞</strong></p> <p><img src="/blog/static/eventlook_img_02.png" alt="异步流程"></p> <blockquote><p>面试题：如何理解JS的异步？</p> <p>答：</p> <p>JS是一门单线程的语言，这是因为它运行在浏览器的渲染主线程中，而渲染主线程只有一个。</p> <p>而渲染主线程承担着诸多的工作，渲染页面、执行JS都在其中运行。
如果使用同步的方式，就极有可能导致主线程产生阻塞，从而导致消息队列中的很多其他任务无法得到执行。</p> <p>这样一来，一方面会导致繁忙的主线程白白的消耗时间，另一方面导致页面无法及时更新，给用户造成卡死现象。</p> <p>所以浏览器采用异步的方式来避免。具体做法是当某些任务发生时，比如计时器、网络、事件监听，主线程将任务交给其他线程去处理，自身立即结束任务的执行，转而执行后续代码。当其他线程完成时，将事先传递的回调函数包装成任务，加入到消息队列的末尾排队，等待主线程调度执行。
在这种异步模式下，浏览器永不阻塞，从而最大限度的保证了单线程的流畅运行。</p></blockquote> <h3 id="js为何会阻碍渲染"><a href="#js为何会阻碍渲染" class="header-anchor">#</a> JS为何会阻碍渲染？</h3> <p>先看代码</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>hello JavaScript!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>change<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> h1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span>

    <span class="token comment">// 死循环指定的时间</span>
    <span class="token keyword">function</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token parameter">duration</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> start <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start <span class="token operator">&lt;</span> duration<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        h1<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'哈哈哈'</span>
            <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>在点击按钮后等待3秒才改变h1文字，说明js的执行会影响页面的绘制</p> <h3 id="任务有优先级吗"><a href="#任务有优先级吗" class="header-anchor">#</a> 任务有优先级吗？</h3> <p>任务没有优先级，在消息队列中先进先出</p> <p>但消息队列是有优先级的</p> <blockquote><p>根据W3C的最新解释：</p> <ul><li>每个任务都有一个任务类型，同一个类型的任务必须在一个队列，不同类型的任务可以分属于不同的队列。在一次事件循环中，浏览器可以根据实际情况从不同的队列中取出任务执行。</li> <li>浏览器必须准备好一个微队列，微队列中的任务优先所有其他任务执行。</li></ul></blockquote> <p><strong>随着浏览器的复杂度急剧提升，W3C不再使用宏队列的说法</strong></p> <p>在目前chrome的实现中，至少包含了下面的队列：</p> <ul><li>延时队列：用于存放计时器到达后的回调任务，优先级「中」</li> <li>交互队列：用于存放用户操作后产生的事件处理任务，优先级「高」</li> <li>微队列：用户存放需要最快执行的任务，优先级「最高」</li></ul> <blockquote><p>添加任务到微队列的主要方式是使用Promise，MutationObserver</p> <p>例如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 立即把一个函数添加到微队列</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></blockquote> <p>执行顺序示例：</p> <ul><li>主线程 -- 5</li> <li>延时队列 -- 3 微队列 -- 1 fn(a) -- 微队列 2</li> <li>微队列 -- 4</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>

Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment">// 结果为：5 4 3 1 2</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>当出现两个promise时：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>

Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment">// 结果为 5 1 2 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="阐述一下js的事件循环"><a href="#阐述一下js的事件循环" class="header-anchor">#</a> 阐述一下JS的事件循环</h3> <blockquote><p>事件循环又叫做消息循环，是浏览器渲染主线程的工作方式。
在Chrome的源码中，它开启一个不会结束的 for 循环，每次循环从消息队列中取出第一个任务执行，而其他线程只需要在合适的时候将任务加入到队列末尾即可。
过去把消息队列简单分为宏队列和微队列，这种说法目前已无法满足复杂的浏览器环境，取而代之的是一种更加灵活多变的处理方式。
根据 W3C官方的解释，每个任务有不同的类型，同类型的任务必须在同一个队列，不同的任务可以属于不同的队列。不同任务队列有不同的优先级，在一次事件循环中，由浏览器自行决定取哪一个队列的任务。但浏览器必须有一个微队列，微队列的任务一定具有最高的优先级，必须优先调度执行。</p></blockquote> <h3 id="js中的中的计时器能做到精确计时吗-为什么"><a href="#js中的中的计时器能做到精确计时吗-为什么" class="header-anchor">#</a> JS中的中的计时器能做到精确计时吗？为什么？</h3> <blockquote><p>不行，因为：</p> <ol><li>计算机硬件没有原子钟，无法做到精确计时</li> <li>操作系统的计数函数本身就有少量偏差，由于JS的计时器最终调用的是操作系统的函数，也就携带了这些偏差</li> <li>按照W3C的标准，浏览器实现计时器时，如果嵌套层级超过5层，则会带有4毫秒的最少时间，这样在计时时间少于4毫秒时又带来了偏差</li> <li>受事件循环的影响，计时器的回调函数只能在主线程空闲时运行，因此又带来了偏差</li></ol></blockquote></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#浏览器的进程模型" title="浏览器的进程模型">浏览器的进程模型</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#何为进程" title="何为进程？">何为进程？</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#何为线程" title="何为线程？">何为线程？</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#浏览器有哪些进程和线程" title="浏览器有哪些进程和线程？">浏览器有哪些进程和线程？</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#渲染主线程是如何工作的" title="渲染主线程是如何工作的？">渲染主线程是如何工作的？</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#若干解释" title="若干解释">若干解释</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#何为异步" title="何为异步？">何为异步？</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#js为何会阻碍渲染" title="JS为何会阻碍渲染？">JS为何会阻碍渲染？</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#任务有优先级吗" title="任务有优先级吗？">任务有优先级吗？</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#阐述一下js的事件循环" title="阐述一下JS的事件循环">阐述一下JS的事件循环</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#js中的中的计时器能做到精确计时吗-为什么" title="JS中的中的计时器能做到精确计时吗？为什么？">JS中的中的计时器能做到精确计时吗？为什么？</a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/guo-429010" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8><li class="copyright-item" data-v-3d9deeb8><a href="http://admin.guo123.top" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8>个人网站后台</a></li><li class="copyright-item" data-v-3d9deeb8>guo123.top | © 2023-present Vue.js</li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.ef606c2b.js" defer></script><script src="/blog/assets/js/6.ef046bf0.js" defer></script><script src="/blog/assets/js/3.0deb6e1a.js" defer></script><script src="/blog/assets/js/16.f2cfb457.js" defer></script>
  </body>
</html>
